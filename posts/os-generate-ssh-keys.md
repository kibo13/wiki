## Генерация SSH-ключей

**SSH** (**S**ecure **Sh**ell) - сетевой протокол, который используется для удаленного управления операционными системами
и передачи файлов. Ключевая особенность заключается в том, что SSH шифрует трафик, делая подключения безопасными. 
По умолчанию, использует 22-й порт.

**SSH-ключи** являются способом идентификации доверенного компьютера при работе с **Git** без ввода пароля
при обращении к репозиторию.

> Рекомендуется регулярно обновлять список SSH-ключей и аннулировать ключи, которые долгое время не используются.

### Проверка наличия SSH-ключей

Перед созданием нового SSH-ключа необходимо проверить, есть ли на компьютере другие ключи.
Обычно они лежат в папке `~/.ssh` - поэтому посмотрим, есть ли в ней что-то, с помощью команды в терминале:

```sh
ls -al ~/.ssh
```

Если ключи существуют, то в списке будут файлы с именами вроде `id_rsa.pub`, `id_ecdsa.pub` или `id_ed25519.pub`.
А если терминал ругается, что директории `~/.ssh` не существует, значит, ключи отсутствуют.

### Генерация нового SSH-ключа 

Для генерации нового ключа в терминале необходимо выполнить команду:

```sh
ssh-keygen -t ed25519 -C "your_email@example.com"
```

Если система [не поддерживает](https://ianix.com/pub/ed25519-deployment.html) алгоритм `ed25519`, 
тогда необходимо выполнить другую команду с алгоритмом `rsa`:

```sh
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

Далее терминал спросит *"Enter a file in which to save the key"*, 
нажимаем `Enter` для создания файла в каталоге, предложенном по умолчанию.

```sh
Generating public/private algorithm key pair.
Enter a file in which to save the key (/c/Users/kibo/.ssh/id_algorithm):[Press enter]
```

Затем необходимо добавить пароль, которым будет зашифрован ключ. Это требуется в целях безопаности.
Пароль можно не вводить, для этого необходимо дважды нажать кнопку `Enter`.

В результате создаётся новый SSH-ключ.

```sh
Your identification has been saved in /Users/kibo/.ssh/id_algorithm
Your public key has been saved in /Users/kibo/.ssh/id_algorithm.pub
...
```

### Добавление SSH-ключа в SSH-agent

**SSH-agent** - программа для хранения и управления SSH-ключами, 
которая избавляет пользователя от необходимости вводить пароль при каждом подключении к серверу. 

Запускаем программу командой: 

```sh
# запуск ssh-agent в фоновом режиме
eval "$(ssh-agent -s)"
```

Если в ответ терминал покажет надпись *"Agent pid"* и *число* - значит агент запущен.

Добавляем ключ командой:

```sh
ssh-add ~/.ssh/id_algorithm
```

> Если у ключа другое имя, меняем название `id_algorithm` именем файла с ключом.

Теперь, если всё хорошо, появится надпись *"Identity added"* - значит, можно переходить к добавлению ключа на **GitHub**.

### Добавление ключа на GitHub

Находим в папке `.ssh` файл c расширением `.pub`, открываем его в текстовом редакторе и копируем содержимое.

Также ключ можно скопировать в буфер обмена командой: 

```sh
clip < ~/.ssh/id_algorithm.pub
```

> Если у ключа другое имя, меняем название `id_algorithm` именем файла с ключом.

Переходим на [страницу для работы с ключами](https://github.com/settings/keys) в профиль на GitHub и нажимаем кнопку *New SSH key*. 

В поле *Title* указываем название нового ключа, а в поле *Key* вставляем скопированный ключ. 

Нажимаем кнопку *Add SSH key*, чтобы подтвердить сохранение.

Если всё сделано верно, новый ключ появится в списке на странице [https://github.com/settings/keys](https://github.com/settings/keys).